<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Hampshire Supermarket | Chipinge</title>
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  /* Brand Colors */
Â  Â  Â  Â  Â  Â  --primary: #1A4D2E; /* Deep Hampshire Green */
Â  Â  Â  Â  Â  Â  --gold: #C9A66B;Â  Â  /* Premium Gold */
Â  Â  Â  Â  Â  Â  --cream: #FAF9F6;Â  Â /* Off-White Background */
Â  Â  Â  Â  Â  Â  --white: #FFFFFF;
Â  Â  Â  Â  Â  Â  --text-main: #333333;
Â  Â  Â  Â  Â  Â  --text-light: #777777;
Â  Â  Â  Â  Â  Â  --whatsapp: #25D366;
Â  Â  Â  Â  Â  Â  --error: #d9534f;
Â  Â  Â  Â  }

Â  Â  Â  Â  * { box-sizing: border-box; }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Lato', sans-serif;
Â  Â  Â  Â  Â  Â  background-color: var(--cream);
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  line-height: 1.6;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- HEADER SECTION --- */
Â  Â  Â  Â  header {
Â  Â  Â  Â  Â  Â  background-color: var(--white);
Â  Â  Â  Â  Â  Â  padding: 1.5rem 1rem;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-bottom: 3px solid var(--primary);
Â  Â  Â  Â  Â  Â  position: sticky;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand-name {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .brand-sub {
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  color: var(--gold);
Â  Â  Â  Â  Â  Â  letter-spacing: 3px;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cart-float {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  transform: translateY(-50%);
Â  Â  Â  Â  Â  Â  background-color: var(--primary);
Â  Â  Â  Â  Â  Â  color: var(--white);
Â  Â  Â  Â  Â  Â  padding: 8px 20px;
Â  Â  Â  Â  Â  Â  border-radius: 50px;
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 10px rgba(26, 77, 46, 0.3);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cart-float:hover {
Â  Â  Â  Â  Â  Â  background-color: var(--gold);
Â  Â  Â  Â  Â  Â  transform: translateY(-52%);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- HERO SECTION --- */
Â  Â  Â  Â  .hero {
Â  Â  Â  Â  Â  Â  background: linear-gradient(rgba(26, 77, 46, 0.8), rgba(26, 77, 46, 0.8)), url('https://images.unsplash.com/photo-1578916171728-46686eac8d58?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  background-position: center;
Â  Â  Â  Â  Â  Â  color: var(--white);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 4rem 1rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .hero h2 {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .hero p {
Â  Â  Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  Â  Â  font-weight: 300;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- NAVIGATION --- */
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 1200px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 0 20px 80px 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .category-scroll {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  Â  Â  padding-bottom: 20px;
Â  Â  Â  Â  Â  Â  margin-bottom: 40px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #e0e0e0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cat-btn {
Â  Â  Â  Â  Â  Â  background: none;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  font-family: 'Lato', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  transition: color 0.3s ease;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  letter-spacing: 0.5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .cat-btn.active, .cat-btn:hover {
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid var(--gold);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- PRODUCT GRID --- */
Â  Â  Â  Â  .grid {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 25px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card {
Â  Â  Â  Â  Â  Â  background: var(--white);
Â  Â  Â  Â  Â  Â  border: 1px solid #eee;
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  transition: transform 0.3s, box-shadow 0.3s;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card::before {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; width: 100%; height: 4px;
Â  Â  Â  Â  Â  Â  background: var(--gold);
Â  Â  Â  Â  Â  Â  transform: scaleX(0);
Â  Â  Â  Â  Â  Â  transition: transform 0.3s;
Â  Â  Â  Â  Â  Â  transform-origin: left;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-5px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 15px 30px rgba(0,0,0,0.08);
Â  Â  Â  Â  Â  Â  border-color: transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card:hover::before { transform: scaleX(1); }

Â  Â  Â  Â  /* NEW FLEX CONTAINER FOR IMAGE PLACEMENT */
Â  Â  Â  Â  .card-top {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-text-wrapper {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  padding-right: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .product-image {
Â  Â  Â  Â  Â  Â  width: 75px;
Â  Â  Â  Â  Â  Â  height: 75px;
Â  Â  Â  Â  Â  Â  object-fit: cover; /* Keeps aspect ratio clean */
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #eee;
Â  Â  Â  Â  Â  Â  background-color: #fafafa; /* Placeholder background */
Â  Â  Â  Â  Â  Â  margin-top: -10px; /* Moves it slightly up into the padding area */
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .item-category {
Â  Â  Â  Â  Â  Â  font-size: 0.7rem;
Â  Â  Â  Â  Â  Â  color: var(--gold);
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .item-title {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  font-size: 1.3rem; /* Slightly smaller to accommodate image */
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  margin: 0 0 5px 0;
Â  Â  Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  }

Â  Â  Â  Â  .item-size {
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  Â  Â  color: var(--text-light);
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  margin-bottom: 0px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- CARD FOOTER & QUANTITY SELECTOR --- */
Â  Â  Â  Â  .card-footer {
Â  Â  Â  Â  Â  Â  margin-top: auto;
Â  Â  Â  Â  Â  Â  border-top: 1px solid #f0f0f0;
Â  Â  Â  Â  Â  Â  padding-top: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .price-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .price {
Â  Â  Â  Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  Â  Â  Â  color: var(--text-main);
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  }

Â  Â  Â  Â  .action-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .qty-input {
Â  Â  Â  Â  Â  Â  width: 60px;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-family: 'Lato', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-add {
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  background-color: var(--primary);
Â  Â  Â  Â  Â  Â  color: var(--white);
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 8px 16px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  transition: all 0.2s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-add:hover {
Â  Â  Â  Â  Â  Â  background-color: var(--gold);
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- LOYALTY CARD SECTION (INTERACTIVE) --- */
Â  Â  Â  Â  .loyalty-box {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--primary) 0%, #0d2b1a 100%);
Â  Â  Â  Â  Â  Â  color: var(--gold);
Â  Â  Â  Â  Â  Â  padding: 40px 20px;
Â  Â  Â  Â  Â  Â  margin: 60px 0;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(26, 77, 46, 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  .loyalty-box h3 {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  font-size: 2rem;
Â  Â  Â  Â  Â  Â  margin: 0 0 10px 0;
Â  Â  Â  Â  Â  Â  color: var(--white);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .loyalty-form {
Â  Â  Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  Â  Â  margin: 20px auto;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  background: rgba(255,255,255,0.1);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(5px);
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(201, 166, 107, 0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  .loyalty-label { color: var(--gold); font-size: 0.9rem; display: block; margin-bottom: 5px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .loyalty-input, .loyalty-select {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  Â  Â  border: 1px solid var(--gold);
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.4);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  font-family: 'Lato', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .loyalty-select option { background: #000; color: white; }
Â  Â  Â  Â  .loyalty-input::placeholder { color: rgba(255,255,255,0.5); }

Â  Â  Â  Â  .btn-gold {
Â  Â  Â  Â  Â  Â  background-color: var(--gold);
Â  Â  Â  Â  Â  Â  color: var(--primary);
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 12px 30px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 1px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-gold:hover { background-color: #d4af37; transform: translateY(-2px); }

Â  Â  Â  Â  /* --- GENERATED CARD STYLES --- */
Â  Â  Â  Â  #card-preview-area {
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  display: none; /* Hidden until generated */
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.5s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-wrapper {
Â  Â  Â  Â  Â  Â  perspective: 1000px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  gap: 20px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  overflow-x: auto; /* Handle mobile overflow */
Â  Â  Â  Â  Â  Â  padding: 20px; /* Padding for shadow */
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Common Card Shape */
Â  Â  Â  Â  .h-card-base {
Â  Â  Â  Â  Â  Â  width: 420px;
Â  Â  Â  Â  Â  Â  height: 260px;
Â  Â  Â  Â  Â  Â  border-radius: 16px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  box-shadow: 0 25px 50px rgba(0,0,0,0.4);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  transition: transform 0.5s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .h-card-base:hover { transform: scale(1.02); }

Â  Â  Â  Â  /* --- FRONT SIDE --- */
Â  Â  Â  Â  .card-front {
Â  Â  Â  Â  Â  Â  /* DEEPEST GREEN - REMAINS DARK IN PREVIEW */
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #082613 0%, #020d06 100%);
Â  Â  Â  Â  Â  Â  border: 1px solid #1f5c37;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- BACK SIDE --- */
Â  Â  Â  Â  .card-back {
Â  Â  Â  Â  Â  Â  background: #f0f0f0;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  font-family: 'Lato', sans-serif;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Back Elements */
Â  Â  Â  Â  /* COMPACT SPACING TO PREVENT OVERLAP */
Â  Â  Â  Â  .mag-stripe {
Â  Â  Â  Â  Â  Â  width: 100%; height: 50px; background: #222; margin-top: 20px; /* Reduced from 30px */
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Signature + CVV Container */
Â  Â  Â  Â  .signature-area {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-top: 10px; /* Reduced from 15px */
Â  Â  Â  Â  Â  Â  padding: 0 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .signature-strip {
Â  Â  Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  Â  Â  height: 40px;Â 
Â  Â  Â  Â  Â  Â  background: white;Â 
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;Â 
Â  Â  Â  Â  Â  Â  display: flex;Â 
Â  Â  Â  Â  Â  Â  align-items: center;Â 
Â  Â  Â  Â  Â  Â  padding-left: 10px;
Â  Â  Â  Â  Â  Â  font-style: italic; color: #999; font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  background-image: repeating-linear-gradient(45deg, #fff 0, #fff 5px, #f9f9f9 5px, #f9f9f9 10px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .cvv-box {
Â  Â  Â  Â  Â  Â  width: 50px; height: 35px; background: white; border: 1px solid #aaa; margin-left: 10px;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  font-family: 'Courier New', monospace; font-weight: bold; font-size: 1rem; color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .cvv-label { position: absolute; top: -15px; right: 0; font-size: 0.6rem; color: #666; }

Â  Â  Â  Â  .back-info {
Â  Â  Â  Â  Â  Â  padding: 15px 20px; /* Adjusted padding */
Â  Â  Â  Â  Â  Â  font-size: 0.65rem; color: #666;Â 
Â  Â  Â  Â  Â  Â  position: absolute; bottom: 0; width: 100%;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* FIXED STAFF CONTACT INFO ON BACK - PREVENTS OVERLAP */
Â  Â  Â  Â  /* Positioned strictly between signature area (ends approx 120px) and bottom info (starts approx 220px) */
Â  Â  Â  Â  .staff-contact-display {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 135px; /* Moved up slightly into the clear zone */
Â  Â  Â  Â  Â  Â  left: 20px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  background: rgba(255,255,255,0.9);
Â  Â  Â  Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  z-index: 5;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  /* CRITICAL for long emails */
Â  Â  Â  Â  Â  Â  overflow-wrap: break-word;Â 
Â  Â  Â  Â  Â  Â  word-break: break-all;
Â  Â  Â  Â  Â  Â  line-height: 1.3;
Â  Â  Â  Â  }
Â  Â  Â  Â  .staff-contact-display strong { color: var(--primary); display: block; margin-bottom: 2px; }

Â  Â  Â  Â  /* Gold Text Effect */
Â  Â  Â  Â  .gold-text {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  color: #C9A66B;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to bottom, #cfc09f 22%,#634f2c 24%, #cfc09f 26%, #cfc09f 27%,#ffecb3 40%,#3a2c0f 78%);Â 
Â  Â  Â  Â  Â  Â  -webkit-background-clip: text;
Â  Â  Â  Â  Â  Â  -webkit-text-fill-color: transparent;
Â  Â  Â  Â  Â  Â  text-shadow: 1px 1px 0px #3a2c0f, 2px 2px 0px #634f2c, 3px 3px 5px rgba(0,0,0,0.6);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Card Elements Front */
Â  Â  Â  Â  .card-border {
Â  Â  Â  Â  Â  Â  position: absolute; top: 15px; left: 15px; right: 15px; bottom: 15px;
Â  Â  Â  Â  Â  Â  border: 2px solid #a68b58; border-radius: 10px; opacity: 0.8;
Â  Â  Â  Â  Â  Â  box-shadow: inset 1px 1px 2px rgba(255,255,255,0.3), inset -1px -1px 2px rgba(0,0,0,0.5), 1px 1px 2px rgba(0,0,0,0.5); z-index: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* GOLD RIBBON CONTAINER - AT TOP */
Â  Â  Â  Â  .logo-area {
Â  Â  Â  Â  Â  Â  position: absolute; top: 30px; left: 0; width: 100%; text-align: center; z-index: 2;
Â  Â  Â  Â  }

Â  Â  Â  Â  .gold-ribbon {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 12px 0;
Â  Â  Â  Â  Â  Â  background: linear-gradient(90deg, rgba(166,139,88,0) 0%, rgba(201,166,107,1) 15%, rgba(252,246,186,1) 50%, rgba(179,135,40,1) 85%, rgba(166,139,88,0) 100%);
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-logo {Â 
Â  Â  Â  Â  Â  Â  font-size: 1.6rem; letter-spacing: 1px; margin: 0; line-height: 1; text-transform: uppercase; white-space: nowrap; font-weight: 800;
Â  Â  Â  Â  Â  Â  color: #0d2b1a; text-shadow: 0px 1px 1px rgba(255,255,255,0.4);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* GOLD STAR FOR STAFF */
Â  Â  Â  Â  .gold-star {
Â  Â  Â  Â  Â  Â  position: absolute;Â 
Â  Â  Â  Â  Â  Â  top: 135px; /* Moved lower to avoid title overlap */
Â  Â  Â  Â  Â  Â  left: 50%;Â 
Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  Â  Â  font-size: 3rem;Â 
Â  Â  Â  Â  Â  Â  color: #ffd700;Â 
Â  Â  Â  Â  Â  Â  text-shadow: 0 2px 5px rgba(0,0,0,0.5);
Â  Â  Â  Â  Â  Â  z-index: 2;Â 
Â  Â  Â  Â  Â  Â  display: none; /* Hidden by default */
Â  Â  Â  Â  }

Â  Â  Â  Â  /* LAYOUT FOR ELEMENTS */
Â  Â  Â  Â  .chip {
Â  Â  Â  Â  Â  Â  position: absolute; top: 90px; left: 40px; width: 50px; height: 38px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #e0d2b4 0%, #a68b58 100%);
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  box-shadow: inset 0 0 5px rgba(0,0,0,0.3), 2px 2px 5px rgba(0,0,0,0.3); opacity: 0.9;
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chip::before { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 1px; background: #634f2c; }
Â  Â  Â  Â  .chip::after { content: ''; position: absolute; left: 33%; top: 0; width: 1px; height: 100%; background: #634f2c; }

Â  Â  Â  Â  /* CENTER CARD NUMBER */
Â  Â  Â  Â  .card-number-container {
Â  Â  Â  Â  Â  Â  position: absolute; top: 140px; width: 100%; text-align: center; z-index: 2;
Â  Â  Â  Â  }
Â  Â  Â  Â  .member-number {Â 
Â  Â  Â  Â  Â  Â  font-family: 'Share Tech Mono', monospace; color: #fff; font-size: 1.5rem; letter-spacing: 3px; text-shadow: 0px 2px 3px rgba(0,0,0,0.8);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  /* EXPIRY DATE */
Â  Â  Â  Â  .expiry-container {
Â  Â  Â  Â  Â  Â  position: absolute; top: 175px; left: 50%; transform: translateX(-20%);
Â  Â  Â  Â  Â  Â  color: #ddd; font-family: 'Share Tech Mono', monospace; font-size: 0.8rem; display: flex; align-items: center; z-index: 2;
Â  Â  Â  Â  }
Â  Â  Â  Â  .valid-label { font-size: 0.5rem; line-height: 1; margin-right: 5px; text-align: right; }
Â  Â  Â  Â  .expiry-date { font-size: 1.1rem; color: #fff; letter-spacing: 1px; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }

Â  Â  Â  Â  /* BOTTOM NAME AND EST */
Â  Â  Â  Â  .bottom-details {
Â  Â  Â  Â  Â  Â  position: absolute; bottom: 25px; width: 100%; padding: 0 40px;
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between; align-items: flex-end; box-sizing: border-box;
Â  Â  Â  Â  Â  Â  z-index: 2;
Â  Â  Â  Â  }

Â  Â  Â  Â  .member-name-display {Â 
Â  Â  Â  Â  Â  Â  color: #e0d2b4; font-family: 'Courier New', monospace; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.8);
Â  Â  Â  Â  Â  Â  /* Prevent overlap with EST if name is long */
Â  Â  Â  Â  Â  Â  max-width: 250px;Â 
Â  Â  Â  Â  Â  Â  white-space: nowrap;Â 
Â  Â  Â  Â  Â  Â  overflow: hidden;Â 
Â  Â  Â  Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .est { font-size: 0.65rem; color: #a68b58; letter-spacing: 1px; text-shadow: 1px 1px 1px rgba(0,0,0,0.5); }

Â  Â  Â  Â  .member-role-display {
Â  Â  Â  Â  Â  Â  position: absolute; top: 85px; width: 100%; text-align: center;
Â  Â  Â  Â  Â  Â  color: #e0d2b4; font-family: 'Lato', sans-serif; font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase; font-weight: bold;
Â  Â  Â  Â  Â  Â  display: none; /* Hidden for members */
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-download {
Â  Â  Â  Â  Â  Â  background-color: var(--white); color: var(--primary); border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 4px; margin-top: 10px; width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-download:hover { background-color: #eee; }

Â  Â  Â  Â  /* Admin Instructions Box */
Â  Â  Â  Â  .admin-instructions-box {
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.95);
Â  Â  Â  Â  Â  Â  border: 2px solid var(--primary);
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
Â  Â  Â  Â  }
Â  Â  Â  Â  .admin-instructions-box h4 {
Â  Â  Â  Â  Â  Â  color: var(--primary); margin-top: 0; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 8px; font-size: 1.1rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  .step-list { padding-left: 20px; margin: 0; }
Â  Â  Â  Â  .step-list li { margin-bottom: 8px; line-height: 1.4; }

Â  Â  Â  Â  /* --- MODAL (RECEIPT STYLE) --- */
Â  Â  Â  Â  .modal-overlay {
Â  Â  Â  Â  Â  Â  display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; animation: fadeIn 0.2s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .modal-body {
Â  Â  Â  Â  Â  Â  background: var(--white); width: 90%; max-width: 480px; margin: 40px auto; padding: 40px; border-radius: 2px; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.3); max-height: 85vh; overflow-y: auto; border-top: 5px solid var(--primary);
Â  Â  Â  Â  }

Â  Â  Â  Â  .close-modal { position: absolute; top: 15px; right: 20px; font-size: 2rem; cursor: pointer; color: #ccc; line-height: 0.5; }
Â  Â  Â  Â  .receipt-header { text-align: center; border-bottom: 1px dashed #ccc; padding-bottom: 20px; margin-bottom: 20px; }
Â  Â  Â  Â  .receipt-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-size: 0.95rem; border-bottom: 1px solid #f9f9f9; padding-bottom: 5px; }
Â  Â  Â  Â  .receipt-qty { background: var(--cream); padding: 2px 8px; border-radius: 4px; font-weight: bold; color: var(--primary); margin-right: 5px; }
Â  Â  Â  Â  .receipt-total { border-top: 2px solid var(--text-main); padding-top: 15px; margin-top: 20px; display: flex; justify-content: space-between; font-weight: 700; font-size: 1.2rem; color: var(--primary); }
Â  Â  Â  Â  .input-field { width: 100%; padding: 12px; margin-top: 20px; border: 1px solid #ccc; font-family: 'Lato', sans-serif; }
Â  Â  Â  Â  .btn-checkout { background-color: var(--primary); color: var(--white); width: 100%; padding: 15px; border: none; margin-top: 20px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; }
Â  Â  Â  Â  .btn-checkout:hover { background-color: #143d24; }

Â  Â  Â  Â  footer { background-color: var(--primary); color: var(--white); text-align: center; padding: 40px 20px; margin-top: 60px; }
Â  Â  Â  Â  footer .brand-small { font-family: 'Playfair Display', serif; font-size: 1.5rem; margin-bottom: 10px; display: block; }
Â  Â  Â  Â  .staff-link { color: rgba(255,255,255,0.3); text-decoration: none; font-size: 0.8rem; margin-top: 20px; display: inline-block; cursor: pointer; }
Â  Â  Â  Â  .staff-link:hover { color: rgba(255,255,255,0.8); }

Â  Â  Â  Â  /* Admin Login Modal */
Â  Â  Â  Â  .auth-container { text-align: center; }
Â  Â  Â  Â  .auth-input { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
Â  Â  Â  Â  .auth-btn { width: 100%; padding: 10px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer; }
Â  Â  Â  Â  .auth-btn:hover { background: #143d24; }
Â  Â  Â  Â  .auth-switch { margin-top: 10px; font-size: 0.9rem; color: #666; cursor: pointer; text-decoration: underline; }
Â  Â  Â  Â  .error-msg { color: var(--error); font-size: 0.85rem; margin-top: 5px; }
Â  Â  Â  Â  .verified-badge { background: var(--gold); color: var(--primary); padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; vertical-align: middle; margin-left: 5px; }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .category-scroll { justify-content: flex-start; }
Â  Â  Â  Â  Â  Â  .cart-float { position: static; margin-top: 15px; transform: none; width: 100%; justify-content: center;}
Â  Â  Â  Â  Â  Â  .cart-float:hover { transform: none; }
Â  Â  Â  Â  Â  Â  .brand-name { font-size: 2rem; }
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
Â  Â  </style>
</head>
<body>

Â  Â  <header>
Â  Â  Â  Â  <h1 class="brand-name">HAMPSHIRE</h1>
Â  Â  Â  Â  <div class="brand-sub">Supermarket &bull; Est. Chipinge</div>
Â  Â  Â  Â  <div class="cart-float" onclick="window.toggleCart()">
Â  Â  Â  Â  Â  Â  <span>View Cart</span>Â 
Â  Â  Â  Â  Â  Â  <span>â€¢</span>
Â  Â  Â  Â  Â  Â  <span style="font-weight: bold;">$<span id="header-total">0.00</span></span>
Â  Â  Â  Â  </div>
Â  Â  </header>

Â  Â  <div class="hero">
Â  Â  Â  Â  <h2>Excellence in Every Aisle</h2>
Â  Â  Â  Â  <p>From fresh produce to daily essentials, experience the quality of Hampshire Supermarket.</p>
Â  Â  </div>

Â  Â  <div class="container">
Â  Â  Â  Â  <div class="category-scroll">
Â  Â  Â  Â  Â  Â  <button class="cat-btn active" onclick="window.filterProducts('All', this)">All Collection</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Staples & Grains', this)">Staples</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Beverages & Condiments', this)">Beverages</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Household & Personal', this)">Household</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Oils & Dairy', this)">Dairy & Oils</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Produce', this)">Fresh Produce</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Proteins', this)">Butchery</button>
Â  Â  Â  Â  Â  Â  <button class="cat-btn" onclick="window.filterProducts('Snacks', this)">Snacks</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="grid" id="product-grid">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="loyalty-box">
Â  Â  Â  Â  Â  Â  <h3>The Hampshire Card</h3>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="admin-indicator" style="display:none; color: var(--white); background: rgba(0,0,0,0.5); display:inline-block; padding: 5px 15px; border-radius: 20px; margin-bottom: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: var(--gold);">â˜… ADMIN MODE ACTIVE</span>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <p>Join our exclusive membership program.</p>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="admin-controls-switch" style="display:none; margin-bottom:20px;">
Â  Â  Â  Â  Â  Â  Â  Â  <label class="loyalty-label">Card Type</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="card-type-select" class="loyalty-select" onchange="window.toggleCardForm()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="member">Standard Member Card</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="business">Business Card (Staff)</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="step-name" class="loyalty-form">
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div id="staff-fields" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="loyalty-label">Designation / Role</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="card-role-select" class="loyalty-select">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="SHOP KEEPER">SHOP KEEPER</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="CHIEF EXECUTIVE OFFICER">CHIEF EXECUTIVE OFFICER</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="DIRECTOR">DIRECTOR</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="TREASURER">TREASURER</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="SECRETARY">SECRETARY</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="loyalty-label">Phone Number</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="staff-phone" class="loyalty-input" placeholder="+263 ...">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="loyalty-label">Email Address</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="staff-email" class="loyalty-input" placeholder="name@hampshire.co.zw">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <label class="loyalty-label">Full Name for Card</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="card-name-input" class="loyalty-input" placeholder="e.g. Tinashe Moyo">
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="window.generateCard()" class="btn-gold" id="gen-btn">Preview Digital Card</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="card-preview-area">
Â  Â  Â  Â  Â  Â  Â  Â  <p id="preview-title" style="color:white; margin-bottom:10px;">Card Preview:</p>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-wrapper" id="card-print-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-card-base card-front" id="card-side-front">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-border"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="logo-area">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="gold-ribbon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="main-logo">HAMPSHIRE SUPERMARKET</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="member-role-display" id="display-role">ROLE HERE</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="chip" id="card-chip"></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="gold-star" id="card-star">â˜…</div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-number-container" id="card-num-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="member-number" id="display-id">8854 **** **** 0001</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="expiry-container" id="card-exp-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="valid-label">VALID<br>THRU</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="expiry-date" id="display-expiry">12/28</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bottom-details">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="member-name-display" id="display-name">MEMBER NAME</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="est">CHIPINGE &bull; ZW</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0) 100%); transform: rotate(30deg); pointer-events: none;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-card-base card-back" id="card-side-back">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mag-stripe"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="signature-area">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="signature-strip">Authorized Signature</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="position: relative;" id="cvv-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="cvv-box" id="display-cvv">123</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="position:absolute; top:-15px; right:0; font-size:0.6rem; color:#666;">CVV</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="staff-contact-display" id="staff-contact-area" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong id="display-staff-phone">Phone: +263 ...</strong>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong id="display-staff-email">Email: ...</strong>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="back-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>This card remains property of Hampshire Supermarket.<br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Found? Call +263 78 864 3858</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <p id="customer-msg" style="font-size:0.9rem; color:#fff; margin-top:10px; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Please visit the store to have your card printed and activated.
Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="admin-controls-area" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="window.downloadCard()" class="btn-download">Download High-Res PDF</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="admin-instructions-box">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ–¨ï¸ Admin Printing Instructions</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ol class="step-list">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Click <b>Download High-Res PDF</b>.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>The file contains <b>2 Pages</b> (Front & Back).</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><b>For ID Printers:</b> Print using "Dual-Sided" mode.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><b>For Manual Printing:</b> Print both pages on Cardstock.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Ensure "Actual Size" is selected in print dialog.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ol>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="modal-overlay" id="cart-modal">
Â  Â  Â  Â  <div class="modal-body">
Â  Â  Â  Â  Â  Â  <span class="close-modal" onclick="window.toggleCart()">&times;</span>
Â  Â  Â  Â  Â  Â  <div class="receipt-header">
Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-family: 'Playfair Display'; font-size: 1.5rem; color: var(--primary);">HAMPSHIRE</div>
Â  Â  Â  Â  Â  Â  Â  Â  <small style="color: #999;">ORDER SUMMARY</small>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="cart-items">
Â  Â  Â  Â  Â  Â  Â  Â  <p style="text-align: center; color: #999;">Your cart is empty.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="receipt-total">
Â  Â  Â  Â  Â  Â  Â  Â  <span>Total Due</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span>$<span id="cart-total">0.00</span></span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <input type="text" id="customer-name" class="input-field" placeholder="Enter your full name">
Â  Â  Â  Â  Â  Â  <button class="btn-checkout" onclick="window.checkout()">
Â  Â  Â  Â  Â  Â  Â  Â  Place Order via WhatsApp
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="modal-overlay" id="admin-login-modal">
Â  Â  Â  Â  <div class="modal-body auth-container">
Â  Â  Â  Â  Â  Â  <span class="close-modal" onclick="window.toggleLoginModal()">&times;</span>
Â  Â  Â  Â  Â  Â  <h3 style="color: var(--primary);">Admin Portal</h3>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div id="auth-form-container">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="auth-email" class="auth-input" placeholder="Admin Email">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" id="auth-password" class="auth-input" placeholder="Password">
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="window.handleAuth()" id="auth-action-btn" class="auth-btn">Login</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="auth-error" class="error-msg"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="auth-switch" onclick="window.switchAuthMode()">Switch to <span id="auth-switch-text">Signup</span></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="auth-loggedin-view" style="display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  <p>Welcome, <span id="admin-email-display" style="font-weight:bold;"></span></p>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="verification-warning" style="background:#fff3cd; color:#856404; padding:10px; font-size:0.85rem; border-radius:4px; margin-bottom:10px; display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Account not verified. Check email to unlock card printing.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <br><button onclick="window.resendVerification()" style="background:none; border:none; text-decoration:underline; cursor:pointer; font-size:0.8rem;">Resend Email</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="verification-success" style="background:#d4edda; color:#155724; padding:10px; font-size:0.85rem; border-radius:4px; margin-bottom:10px; display:none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="verified-badge">VERIFIED ADMIN</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <br>Card printing unlocked.
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="window.handleLogout()" class="auth-btn" style="background: #666;">Logout</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <footer>
Â  Â  Â  Â  <span class="brand-small">HAMPSHIRE</span>
Â  Â  Â  Â  <small>&copy; 2025 Hampshire Supermarket. Quality Grocers of Chipinge.</small>
Â  Â  Â  Â  <br>
Â  Â  Â  Â  <span class="staff-link" onclick="window.toggleLoginModal()">[Admin Login]</span>
Â  Â  </footer>

Â  Â  <script type="module">
Â  Â  Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
Â  Â  Â  Â  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
Â  Â  Â  Â  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

Â  Â  Â  Â  // 1. Firebase Configuration (From provided details)
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  Â  Â  apiKey: "AIzaSyD1at8Ed1XqtNYgw62Gln2drJ0tVcvVopQ",
Â  Â  Â  Â  Â  Â  authDomain: "takwiriradental.firebaseapp.com",
Â  Â  Â  Â  Â  Â  projectId: "takwiriradental",
Â  Â  Â  Â  Â  Â  storageBucket: "takwiriradental.firebasestorage.app",
Â  Â  Â  Â  Â  Â  messagingSenderId: "203276188494",
Â  Â  Â  Â  Â  Â  appId: "1:203276188494:web:f336905030ce0291a43c1f",
Â  Â  Â  Â  Â  Â  measurementId: "G-31R190PKEM"
Â  Â  Â  Â  };

Â  Â  Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = getAuth(app);
Â  Â  Â  Â Â 
Â  Â  Â  Â  let isLoginMode = true;
Â  Â  Â  Â  let isAdminVerified = false;
Â  Â  Â  Â  let inactivityTimer;

Â  Â  Â  Â  // Auto-Logout Function
Â  Â  Â  Â  const startInactivityTimer = () => {
Â  Â  Â  Â  Â  Â  clearTimeout(inactivityTimer);
Â  Â  Â  Â  Â  Â  if (isAdminVerified) {
Â  Â  Â  Â  Â  Â  Â  Â  inactivityTimer = setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Admin session timed out (2 minutes).");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.handleLogout();
Â  Â  Â  Â  Â  Â  Â  Â  }, 120000); // 120,000 ms = 2 minutes
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Activity Listeners
Â  Â  Â  Â  ['mousemove', 'keydown', 'click', 'scroll', 'touchstart'].forEach(event => {
Â  Â  Â  Â  Â  Â  document.addEventListener(event, startInactivityTimer);
Â  Â  Â  Â  });

Â  Â  Â  Â  // --- AUTH STATE LISTENER ---
Â  Â  Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  Â  Â  Â  const formContainer = document.getElementById('auth-form-container');
Â  Â  Â  Â  Â  Â  const loggedInView = document.getElementById('auth-loggedin-view');
Â  Â  Â  Â  Â  Â  const adminControls = document.getElementById('admin-controls-area');
Â  Â  Â  Â  Â  Â  const customerMsg = document.getElementById('customer-msg');
Â  Â  Â  Â  Â  Â  const genBtn = document.getElementById('gen-btn');
Â  Â  Â  Â  Â  Â  const adminIndicator = document.getElementById('admin-indicator');
Â  Â  Â  Â  Â  Â  const adminSwitch = document.getElementById('admin-controls-switch');

Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  // User is logged in
Â  Â  Â  Â  Â  Â  Â  Â  formContainer.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  loggedInView.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('admin-email-display').innerText = user.email;

Â  Â  Â  Â  Â  Â  Â  Â  if (user.emailVerified) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isAdminVerified = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('verification-success').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('verification-warning').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Enable Admin Features
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminControls.style.display = 'block';Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  customerMsg.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  genBtn.innerText = "Generate Official Card";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminIndicator.style.display = 'inline-block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminSwitch.style.display = 'block'; // Show Type Switcher
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startInactivityTimer();Â 
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isAdminVerified = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('verification-success').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('verification-warning').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminControls.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  customerMsg.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  genBtn.innerText = "Preview Digital Card";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminIndicator.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  adminSwitch.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(inactivityTimer);Â 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // User logged out
Â  Â  Â  Â  Â  Â  Â  Â  formContainer.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  loggedInView.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  isAdminVerified = false;
Â  Â  Â  Â  Â  Â  Â  Â  adminControls.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  customerMsg.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  genBtn.innerText = "Preview Digital Card";
Â  Â  Â  Â  Â  Â  Â  Â  adminIndicator.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  adminSwitch.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(inactivityTimer);Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // --- AUTH FUNCTIONS (Exposed to Window) ---
Â  Â  Â  Â  window.toggleLoginModal = () => {
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('admin-login-modal');
Â  Â  Â  Â  Â  Â  modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
Â  Â  Â  Â  };

Â  Â  Â  Â  window.switchAuthMode = () => {
Â  Â  Â  Â  Â  Â  isLoginMode = !isLoginMode;
Â  Â  Â  Â  Â  Â  document.getElementById('auth-action-btn').innerText = isLoginMode ? "Login" : "Signup";
Â  Â  Â  Â  Â  Â  document.getElementById('auth-switch-text').innerText = isLoginMode ? "Signup" : "Login";
Â  Â  Â  Â  Â  Â  document.getElementById('auth-error').innerText = "";
Â  Â  Â  Â  };

Â  Â  Â  Â  window.handleAuth = async () => {
Â  Â  Â  Â  Â  Â  const email = document.getElementById('auth-email').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('auth-password').value;
Â  Â  Â  Â  Â  Â  const errorDiv = document.getElementById('auth-error');
Â  Â  Â  Â  Â  Â  errorDiv.innerText = "";

Â  Â  Â  Â  Â  Â  if(!email || !password) { errorDiv.innerText = "Please fill all fields"; return; }

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  if(isLoginMode) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await signInWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const userCred = await createUserWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await sendEmailVerification(userCred.user);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("Account created! Please check your email to verify.");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  errorDiv.innerText = error.message.replace("Firebase: ", "");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  window.handleLogout = () => {
Â  Â  Â  Â  Â  Â  clearTimeout(inactivityTimer);
Â  Â  Â  Â  Â  Â  signOut(auth);
Â  Â  Â  Â  };

Â  Â  Â  Â  window.resendVerification = async () => {
Â  Â  Â  Â  Â  Â  if(auth.currentUser) {
Â  Â  Â  Â  Â  Â  Â  Â  await sendEmailVerification(auth.currentUser);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Verification email sent!");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- ORIGINAL APP LOGIC ---
Â  Â  Â  Â  const SHOP_PHONE = "263788643858";Â 
Â  Â  Â  Â  const inventory = [
Â  Â  Â  Â  Â  Â  { cat: 'Beverages & Condiments', name: 'Bath Soap (Bottle)', size: '500ml', price: 5.00 }, { cat: 'Beverages & Condiments', name: 'Bottled Water', size: '500ml', price: 5.00 }, { cat: 'Beverages & Condiments', name: 'Premium Coffee', size: '250g tin', price: 3.00 }, { cat: 'Beverages & Condiments', name: 'Mazoe Orange Crush', size: '2L', price: 3.00 }, { cat: 'Beverages & Condiments', name: 'Salad Cream', size: '500ml', price: 2.50 }, { cat: 'Beverages & Condiments', name: 'Soft Drinks', size: '300ml', price: 8.00 }, { cat: 'Beverages & Condiments', name: 'Tea Leaves', size: '250g', price: 2.00 }, { cat: 'Beverages & Condiments', name: 'Tomato Sauce', size: '500ml', price: 1.00 },
Â  Â  Â  Â  Â  Â  { cat: 'Household & Personal', name: 'Bar Soap (Green)', size: '1kg', price: 1.00 }, { cat: 'Household & Personal', name: 'Bath Soap', size: '225g', price: 0.60 }, { cat: 'Household & Personal', name: 'Candles', size: '6-pack', price: 3.20 }, { cat: 'Household & Personal', name: 'Curry Powder', size: 'Pack', price: 5.00 }, { cat: 'Household & Personal', name: 'Diapers', size: '50-pack', price: 6.00 }, { cat: 'Household & Personal', name: 'Dishwashing Liquid', size: '750ml', price: 1.60 }, { cat: 'Household & Personal', name: 'Body Lotion', size: '300ml', price: 2.00 }, { cat: 'Household & Personal', name: 'Matches', size: '10-box', price: 0.50 }, { cat: 'Household & Personal', name: 'Clothes Pegs', size: 'Pack', price: 2.00 }, { cat: 'Household & Personal', name: 'Royco Usavi', size: 'Pack', price: 4.00 }, { cat: 'Household & Personal', name: 'Sanitary Pads', size: '10-pack', price: 1.00 }, { cat: 'Household & Personal', name: 'Toilet Cleaner', size: 'Set', price: 5.00 }, { cat: 'Household & Personal', name: 'Toilet Paper', size: '4-roll', price: 1.00 }, { cat: 'Household & Personal', name: 'Washing Powder', size: '1kg', price: 2.00 },
Â  Â  Â  Â  Â  Â  { cat: 'Oils & Dairy', name: 'Cooking Oil', size: '1 Litre', price: 2.00 }, { cat: 'Oils & Dairy', name: 'Cooking Oil', size: '2 Litres', price: 4.00 }, { cat: 'Oils & Dairy', name: 'Margarine', size: '500g', price: 1.20 }, { cat: 'Oils & Dairy', name: 'Fresh Milk', size: '1 Litre', price: 1.20 },
Â  Â  Â  Â  Â  Â  { cat: 'Produce', name: 'Cabbage', size: 'Head', price: 1.50 }, { cat: 'Produce', name: 'Carrots', size: 'Per kg', price: 1.00 }, { cat: 'Produce', name: 'Green Vegetables', size: 'Bundle', price: 0.80 }, { cat: 'Produce', name: 'Red Onions', size: 'Per kg', price: 1.20 }, { cat: 'Produce', name: 'Potatoes', size: 'Per kg', price: 1.00 }, { cat: 'Produce', name: 'Tomatoes', size: 'Per kg', price: 1.00 },
Â  Â  Â  Â  Â  Â  { cat: 'Proteins', name: 'Canned Beef', size: '300g', price: 5.00 }, { cat: 'Proteins', name: 'Dried Kapenta', size: 'Per kg', price: 5.00 }, { cat: 'Proteins', name: 'Farm Eggs', size: '30-tray', price: 3.80 }, { cat: 'Proteins', name: 'Frozen Fish', size: 'Box', price: 17.00 }, { cat: 'Proteins', name: 'Peanut Butter', size: '375ml', price: 5.00 },
Â  Â  Â  Â  Â  Â  { cat: 'Snacks', name: 'Biscuits', size: '150g', price: 5.00 }, { cat: 'Snacks', name: 'Sweets', size: '500g', price: 2.00 }, { cat: 'Snacks', name: 'Chocolates', size: 'Pack', price: 6.00 },
Â  Â  Â  Â  Â  Â  { cat: 'Staples & Grains', name: 'Cerevita', size: 'Pack', price: 3.50 }, { cat: 'Staples & Grains', name: 'Flour (Self-R)', size: '1kg', price: 1.20 }, { cat: 'Staples & Grains', name: 'Flour (Self-R)', size: '2kg', price: 2.50 }, { cat: 'Staples & Grains', name: 'Instant Porridge', size: 'Pack', price: 3.50 }, { cat: 'Staples & Grains', name: 'Roller Meal', size: '5kg', price: 4.30 }, { cat: 'Staples & Grains', name: 'Roller Meal', size: '10kg', price: 6.50 }, { cat: 'Staples & Grains', name: 'Roller Meal', size: '20kg', price: 11.00 }, { cat: 'Staples & Grains', name: 'Maputi', size: 'Pack', price: 2.00 }, { cat: 'Staples & Grains', name: 'Mhandire', size: 'Pack', price: 2.00 }, { cat: 'Staples & Grains', name: 'Popcorn Kernels', size: 'Per kg', price: 1.00 }, { cat: 'Staples & Grains', name: 'Rice (Parboiled)', size: '1kg', price: 1.67 }, { cat: 'Staples & Grains', name: 'Rice (Parboiled)', size: '2kg', price: 2.67 }, { cat: 'Staples & Grains', name: 'Rice (Value)', size: '1kg', price: 1.44 }, { cat: 'Staples & Grains', name: 'Rice (Value)', size: '2kg', price: 2.44 }
Â  Â  Â  Â  ];
Â  Â  Â  Â  let cart = [];

Â  Â  Â  Â  window.filterProducts = (category, element) => {
Â  Â  Â  Â  Â  Â  const grid = document.getElementById('product-grid');
Â  Â  Â  Â  Â  Â  grid.innerHTML = '';Â 
Â  Â  Â  Â  Â  Â  if(element) { document.querySelectorAll('.cat-btn').forEach(el => el.classList.remove('active')); element.classList.add('active'); }
Â  Â  Â  Â  Â  Â  inventory.forEach((item, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  if (category === 'All' || item.cat === category) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Generate a filename based on the product name
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // e.g. "Bath Soap (Bottle)" -> "bath-soap-bottle.jpg"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const imgFileName = item.name.toLowerCase()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .replace(/&/g, 'and')
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .replace(/[^a-z0-9]/g, '-') // replace non-alphanumeric chars with dash
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .replace(/-+/g, '-')Â  Â  Â  Â  // remove double dashes
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .replace(/^-|-$/g, '')Â  Â  Â  // remove trim dashes
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  + '.jpg';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Fallback to placeholder if image not found (using onerror)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const fallbackImg = "https://placehold.co/100x100/f0f0f0/999?text=IMG";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'card';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-top">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-text-wrapper">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-category">${item.cat.split('&')[0]}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="item-title">${item.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="item-size">${item.size}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="./images/${imgFileName}" class="product-image" alt="${item.name}" onerror="this.src='${fallbackImg}'">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-footer">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="price-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="price">$${item.price.toFixed(2)}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="action-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="qty-${index}" class="qty-input" value="1" min="1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-add" onclick="window.addToCart(${index})">Add</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  };

Â  Â  Â  Â  window.addToCart = (index) => {
Â  Â  Â  Â  Â  Â  const qtyInput = document.getElementById(`qty-${index}`);
Â  Â  Â  Â  Â  Â  const qty = parseInt(qtyInput.value);
Â  Â  Â  Â  Â  Â  const item = inventory[index];
Â  Â  Â  Â  Â  Â  if(isNaN(qty) || qty < 1) { alert("Please enter a valid quantity."); return; }
Â  Â  Â  Â  Â  Â  const existingItem = cart.find(cartItem => cartItem.name === item.name);
Â  Â  Â  Â  Â  Â  if(existingItem) { existingItem.qty += qty; } else { cart.push({ ...item, qty: qty }); }
Â  Â  Â  Â  Â  Â  const originalText = document.activeElement.innerText;
Â  Â  Â  Â  Â  Â  document.activeElement.innerText = "Added!";
Â  Â  Â  Â  Â  Â  setTimeout(() => document.activeElement.innerText = originalText, 1000);
Â  Â  Â  Â  Â  Â  window.updateCartUI();
Â  Â  Â  Â  };

Â  Â  Â  Â  window.removeFromCart = (index) => { cart.splice(index, 1); window.updateCartUI(); };

Â  Â  Â  Â  window.updateCartUI = () => {
Â  Â  Â  Â  Â  Â  const headerTotal = document.getElementById('header-total');
Â  Â  Â  Â  Â  Â  const cartTotal = document.getElementById('cart-total');
Â  Â  Â  Â  Â  Â  const cartItems = document.getElementById('cart-items');
Â  Â  Â  Â  Â  Â  let total = 0; let html = '';
Â  Â  Â  Â  Â  Â  if (cart.length === 0) { html = '<p style="text-align: center; color: #999;">Your cart is empty.</p>'; } else {
Â  Â  Â  Â  Â  Â  Â  Â  cart.forEach((item, i) => { const lineTotal = item.price * item.qty; total += lineTotal; html += `<div class="receipt-item"><div style="flex-grow:1;"><span class="receipt-qty">${item.qty}x</span><span style="font-weight:bold;">${item.name}</span><br><small style="color:#777; margin-left:38px;">(${item.size})</small></div><div style="text-align:right;"><div>$${lineTotal.toFixed(2)}</div><span onclick="window.removeFromCart(${i})" style="color:#d9534f; cursor:pointer; font-size:0.8rem; text-decoration:underline;">Remove</span></div></div>`; });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  cartItems.innerHTML = html; headerTotal.innerText = total.toFixed(2); cartTotal.innerText = total.toFixed(2);
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- UPDATED TOGGLE CART FUNCTION ---
Â  Â  Â  Â  window.toggleCart = () => {Â 
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('cart-modal');Â 
Â  Â  Â  Â  Â  Â  // Fix: Check against 'block' because initial inline style is empty
Â  Â  Â  Â  Â  Â  if (modal.style.display === 'block') {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'none';
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  modal.style.display = 'block';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  window.checkout = () => {
Â  Â  Â  Â  Â  Â  if (cart.length === 0) { alert("Your cart is empty."); return; }
Â  Â  Â  Â  Â  Â  const name = document.getElementById('customer-name').value;
Â  Â  Â  Â  Â  Â  if(!name) { alert("Please enter your name to complete the order."); return; }
Â  Â  Â  Â  Â  Â  let message = `*HAMPSHIRE SUPERMARKET ORDER*\n-----------------------------\nCustomer: ${name}\n\n`;
Â  Â  Â  Â  Â  Â  let total = 0;
Â  Â  Â  Â  Â  Â  cart.forEach(item => { const lineTotal = item.price * item.qty; message += `â€¢ ${item.name} (${item.size}) x ${item.qty} - $${lineTotal.toFixed(2)}\n`; total += lineTotal; });
Â  Â  Â  Â  Â  Â  message += `\n*TOTAL DUE: $${total.toFixed(2)}*\n-----------------------------\nI will collect this order from the store.`;
Â  Â  Â  Â  Â  Â  const whatsappUrl = `https://wa.me/${SHOP_PHONE}?text=${encodeURIComponent(message)}`;
Â  Â  Â  Â  Â  Â  window.open(whatsappUrl, '_blank');
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- CARD LOGIC ---
Â  Â  Â  Â  window.toggleCardForm = () => {
Â  Â  Â  Â  Â  Â  const type = document.getElementById('card-type-select').value;
Â  Â  Â  Â  Â  Â  const staffFields = document.getElementById('staff-fields');
Â  Â  Â  Â  Â  Â  staffFields.style.display = type === 'business' ? 'block' : 'none';
Â  Â  Â  Â  };

Â  Â  Â  Â  window.generateCard = () => {
Â  Â  Â  Â  Â  Â  const nameInput = document.getElementById('card-name-input').value;
Â  Â  Â  Â  Â  Â  const type = document.getElementById('card-type-select').value;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if(nameInput.trim() === "") { alert("Please enter your name first!"); return; }
Â  Â  Â  Â  Â  Â  document.getElementById('display-name').innerText = nameInput;

Â  Â  Â  Â  Â  Â  if (isAdminVerified && type === 'business') {
Â  Â  Â  Â  Â  Â  Â  Â  // BUSINESS CARD MODE
Â  Â  Â  Â  Â  Â  Â  Â  const role = document.getElementById('card-role-select').value;
Â  Â  Â  Â  Â  Â  Â  Â  const phone = document.getElementById('staff-phone').value || "+263 ...";
Â  Â  Â  Â  Â  Â  Â  Â  const email = document.getElementById('staff-email').value || "...";

Â  Â  Â  Â  Â  Â  Â  Â  // Front Modifications
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-role').innerText = role;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-role').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-chip').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-num-container').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-exp-container').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-star').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  // Back Modifications
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('cvv-container').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-staff-phone').innerText = "Phone: " + phone;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-staff-email').innerText = "Email: " + email;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('staff-contact-area').style.display = 'block';

Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // MEMBER CARD MODE
Â  Â  Â  Â  Â  Â  Â  Â  const randomPart = Math.floor(Math.random() * 1000000000000).toString().padStart(12, '0');
Â  Â  Â  Â  Â  Â  Â  Â  const formattedID = "8854 " + randomPart.substring(0,4) + " " + randomPart.substring(4,8) + " " + randomPart.substring(8,12);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-id').innerText = formattedID;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Front Modifications
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('display-role').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-chip').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-num-container').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-exp-container').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('card-star').style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  // Back Modifications
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('cvv-container').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('staff-contact-area').style.display = 'none';
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.getElementById('card-preview-area').style.display = 'block';
Â  Â  Â  Â  };

Â  Â  Â  Â  window.downloadCard = async () => {
Â  Â  Â  Â  Â  Â  if (!isAdminVerified) return;

Â  Â  Â  Â  Â  Â  const { jsPDF } = window.jspdf;
Â  Â  Â  Â  Â  Â  const frontElement = document.getElementById("card-side-front");
Â  Â  Â  Â  Â  Â  const backElement = document.getElementById("card-side-back");

Â  Â  Â  Â  Â  Â  const prepareElement = (el) => {
Â  Â  Â  Â  Â  Â  Â  Â  const clone = el.cloneNode(true);
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.transform = "none";
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.position = "fixed";
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.top = "-9999px";
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.left = "0";
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.zIndex = "9999";
Â  Â  Â  Â  Â  Â  Â  Â  clone.style.boxShadow = "none";Â 
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const goldTexts = clone.querySelectorAll('.gold-text');
Â  Â  Â  Â  Â  Â  Â  Â  goldTexts.forEach(t => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t.style.background = "none";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t.style.webkitTextFillColor = "#C9A66B";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  t.style.color = "#C9A66B";
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(clone);
Â  Â  Â  Â  Â  Â  Â  Â  return clone;
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // 1. Capture Front
Â  Â  Â  Â  Â  Â  Â  Â  const frontClone = prepareElement(frontElement);

Â  Â  Â  Â  Â  Â  Â  Â  // --- CHANGE BACKGROUND FOR DOWNLOAD ONLY ---
Â  Â  Â  Â  Â  Â  Â  Â  // Keep original dark green for consistency
Â  Â  Â  Â  Â  Â  Â  Â  // frontClone.style.background = "linear-gradient(135deg, #e8f5e9 0%, #dcedc8 100%)";
Â  Â  Â  Â  Â  Â  Â  Â  // -------------------------------------------

Â  Â  Â  Â  Â  Â  Â  Â  const frontCanvas = await html2canvas(frontClone, { scale: 4, backgroundColor: null, logging: false });
Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(frontClone);
Â  Â  Â  Â  Â  Â  Â  Â  const frontImg = frontCanvas.toDataURL("image/png");

Â  Â  Â  Â  Â  Â  Â  Â  // 2. Capture Back
Â  Â  Â  Â  Â  Â  Â  Â  const backClone = prepareElement(backElement);
Â  Â  Â  Â  Â  Â  Â  Â  const backCanvas = await html2canvas(backClone, { scale: 4, backgroundColor: null, logging: false });
Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(backClone);
Â  Â  Â  Â  Â  Â  Â  Â  const backImg = backCanvas.toDataURL("image/png");

Â  Â  Â  Â  Â  Â  Â  Â  const doc = new jsPDF({ orientation: 'landscape', unit: 'mm', format: [85.6, 53.98] });
Â  Â  Â  Â  Â  Â  Â  Â  doc.addImage(frontImg, 'PNG', 0, 0, 85.6, 53.98);
Â  Â  Â  Â  Â  Â  Â  Â  doc.addPage();
Â  Â  Â  Â  Â  Â  Â  Â  doc.addImage(backImg, 'PNG', 0, 0, 85.6, 53.98);

Â  Â  Â  Â  Â  Â  Â  Â  doc.save(`Hampshire_Card_${document.getElementById('display-name').innerText.replace(/\s+/g, '_')}.pdf`);

Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("PDF Generation Error:", err);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Error generating PDF. Please try again.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Init
Â  Â  Â  Â  window.filterProducts('All', null);
Â  Â  </script>
</body>
</html>
